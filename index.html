<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>STRESS BREAKER v2.2 - FIXED</title>
    <style>
        :root { --main: #00ffcc; --bg: #050505; --accent: #706fd3; }
        body {
            background: #000; color: #fff; font-family: 'Courier New', monospace;
            margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden;
        }
        /* 광고 영역: 클릭 방해 금지 설정 */
        .ad-space {
            height: 50px; background: rgba(255, 255, 255, 0.05);
            display: flex; justify-content: center; align-items: center;
            font-size: 10px; color: #444; pointer-events: none; /* 클릭 통과 */
            border-bottom: 1px solid #222;
        }
        #ui-layer { text-align: center; padding: 10px; z-index: 50; }
        #game-area {
            flex-grow: 1; /* 남은 공간 모두 차지 */
            width: 95%; margin: 0 auto; position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--accent); border-radius: 10px;
            overflow: hidden; box-shadow: inset 0 0 20px rgba(112, 111, 211, 0.3);
        }
        .target {
            position: absolute; padding: 15px 25px; background: #fff;
            color: #000; font-weight: bold; border-radius: 4px;
            box-shadow: 5px 5px 0px var(--main); cursor: pointer;
            user-select: none; z-index: 100;
        }
        #start-btn {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            padding: 20px 60px; font-size: 24px; font-weight: bold;
            background: #000; color: var(--main); border: 3px solid var(--main);
            cursor: pointer; z-index: 200; box-shadow: 0 0 30px rgba(0, 255, 204, 0.3);
        }
        #start-btn:hover { background: var(--main); color: #000; }
    </style>
</head>
<body>
    <div class="ad-space">AD REVENUE AREA - 수익 창출 대기 중</div>
    
    <div id="ui-layer">
        <h2 style="margin:0; color:var(--main)">STRESS BREAKER v2.2</h2>
        <p>SCORE: <span id="score">0</span> | TIME: <span id="timer">30</span></p>
    </div>

    <div id="game-area">
        <button id="start-btn" onclick="startGame()">작전 개시</button>
    </div>

    <div class="ad-space" style="border-top: 1px solid #222; border-bottom: none;">AD REVENUE AREA - 배너 위치 사수</div>

    <script>
        const gameArea = document.getElementById('game-area');
        const scoreBox = document.getElementById('score');
        const timerBox = document.getElementById('timer');
        const startBtn = document.getElementById('start-btn');
        let score = 0, timeLeft = 30, gameInterval;

        const words = ['불합격', '스트레스', '초조함', '기다림', '실수', '낙방은 없다'];

        function startGame() {
            console.log("Game Started!"); // 디버깅용
            score = 0; timeLeft = 30;
            scoreBox.innerText = score;
            timerBox.innerText = timeLeft;
            startBtn.style.display = 'none'; // 버튼 완전히 제거
            gameArea.innerHTML = '';
            
            spawnTarget();
            
            if(gameInterval) clearInterval(gameInterval);
            gameInterval = setInterval(() => {
                timeLeft--;
                timerBox.innerText = timeLeft;
                if(timeLeft <= 0) endGame();
            }, 1000);
        }

        function spawnTarget() {
            gameArea.innerHTML = '';
            const target = document.createElement('div');
            target.className = 'target';
            target.innerText = words[Math.floor(Math.random() * words.length)];
            
            // 크기 계산 후 랜덤 위치 배치
            const x = Math.random() * (gameArea.clientWidth - 150);
            const y = Math.random() * (gameArea.clientHeight - 80);
            
            target.style.left = Math.max(10, x) + 'px';
            target.style.top = Math.max(10, y) + 'px';
            
            target.onmousedown = (e) => { // click 대신 mousedown으로 반응 속도 UP
                score++;
                scoreBox.innerText = score;
                spawnTarget();
            };
            gameArea.appendChild(target);
        }

        function endGame() {
            clearInterval(gameInterval);
            gameArea.innerHTML = `
                <div style="text-align:center; margin-top:20%; font-size:24px; color:var(--main)">
                    작전 종료!<br>최종 타격 점수: ${score}<br>
                    <button onclick="location.reload()" style="margin-top:20px; padding:10px 20px; cursor:pointer;">다시 시도</button>
                </div>`;
        }
    </script>
</body>
</html>